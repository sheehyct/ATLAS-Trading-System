# ATLAS Development - Session Startup

**Current Session:** CRYPTO-4
**Last Session:** CRYPTO-3 (December 13, 2025)
**Focus:** Intraday leverage config, VPS deployment, paper balance update

---

## Session CRYPTO-3 Accomplishments

### Entry Monitor and Daemon (COMPLETE)

Full automation stack for 24/7 crypto paper trading.

**Files Created:**
| File | Purpose |
|------|---------|
| `crypto/scanning/entry_monitor.py` | 24/7 trigger polling (60s intervals) |
| `crypto/scanning/daemon.py` | Main orchestration daemon |

**Files Modified:**
| File | Changes |
|------|---------|
| `crypto/scanning/__init__.py` | Export entry monitor and daemon |
| `crypto/__init__.py` | Export new classes, bump to v0.3.0 |

**Verified Working:**
```python
from crypto import CryptoSignalDaemon

daemon = CryptoSignalDaemon()
signals = daemon.run_scan_and_monitor()
# BTC: 3-2U LONG (1w), ETH: 2D-1-? LONG (1d)

daemon.start(block=False)  # Background mode
daemon.stop()
```

---

## Session CRYPTO-4 Priorities

### Priority 1: Intraday Leverage Configuration (HIGH)

Update `crypto/config.py` for Coinbase intraday leverage rules.

**Tasks:**
- Add intraday leverage window (6PM-4PM ET = 22:00-16:00 ET)
- Implement leverage tier switching based on time
- Update position sizing to use appropriate tier
- Document the 2-hour gap (4PM-6PM ET) where higher leverage unavailable

**Coinbase Rules:**
- Intraday: Up to 10x (crypto perps)
- Available: 22 hours/day (6PM to 4PM ET)
- Must close positions before 4PM ET to use intraday leverage

### Priority 2: Paper Balance Update (HIGH)

Update `crypto/config.py` default paper balance from $1,000.

**Tasks:**
- Change `DEFAULT_PAPER_BALANCE` to 1000.0
- Verify position sizing still works correctly
- Test with daemon

### Priority 3: VPS Deployment Script (HIGH)

Create CLI script for running daemon on VPS.

**Tasks:**
- Create `scripts/run_crypto_daemon.py` with proper logging
- Add systemd service file template
- Document deployment steps
- Test on VPS (178.156.223.251)

### Priority 4: Position Monitoring (MEDIUM)

Add stop/target tracking for open paper trades.

**Tasks:**
- Track stop_loss and take_profit from signals
- Monitor positions and auto-close at levels
- P&L calculation on close

---

## Crypto Module Structure (v0.3.0)

```
crypto/
  __init__.py              # v0.3.0, exports scanner + monitor + daemon
  config.py                # Symbols, leverage tiers, risk params
  exchange/
    coinbase_client.py     # Coinbase API (data + orders)
  data/
    state.py               # CryptoSystemState
  scanning/
    __init__.py
    models.py              # CryptoDetectedSignal, CryptoSignalContext
    signal_scanner.py      # CryptoSignalScanner
    entry_monitor.py       # CryptoEntryMonitor (NEW)
    daemon.py              # CryptoSignalDaemon (NEW)
  simulation/
    paper_trader.py        # Paper trading simulation
  trading/
    sizing.py              # Position sizing
    derivatives.py         # Funding, margin calculations
```

---

## Leverage Tiers Reference

| Tier | Leverage | Availability | Use Case |
|------|----------|--------------|----------|
| Intraday | 10x | 6PM-4PM ET (22h) | Close before 4PM |
| Swing | 4x | 24/7 | Hold through funding |

**Funding Times (UTC):** 00:00, 08:00, 16:00

---

## Plan Mode Recommendation

**PLAN MODE: OFF** - Implementation continues from established architecture.

---

## Reference Documents

- HANDOFF: `docs/HANDOFF.md`
- Crypto Config: `crypto/config.py`
- Daemon: `crypto/scanning/daemon.py`
- Entry Monitor: `crypto/scanning/entry_monitor.py`

---

## Session Numbering

- **83K-XX** - Equities STRAT options work
- **CRYPTO-XX** - Crypto derivatives work

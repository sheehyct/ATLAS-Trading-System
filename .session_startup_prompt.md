# Session Startup Prompt - EQUITY-53

**Previous Session:** EQUITY-52-B (January 10, 2026)
**Current Branch:** `main`
**VPS Status:** Pending deployment of EQUITY-52-B changes

---

## EQUITY-52-B Completed Work

Session EQUITY-52-B implemented three features for 3-2 patterns:

1. **ATR-based targets** - `target = entry +/- (ATR * 1.5)` for dynamic scaling
2. **ATR-based trailing stops** - Activate at 0.75 ATR, trail by 1.0 ATR
3. **Automated daily audit** - Webhook report at 4:30 PM ET

**Key User Decisions:**
- 3-2 patterns bypass 1H 1.0x override (use ATR for ALL timeframes)
- Only 3-2 patterns use ATR trailing (others keep percentage-based)
- Discord webhook for now (can upgrade to bot later)

**Tests:** 348 STRAT tests + 65 signal automation tests passed

---

## Next Session Priorities

### 1. Deploy EQUITY-52-B to VPS

```bash
# On VPS
cd /path/to/vectorbt-workspace
git pull origin main
sudo systemctl restart atlas-signal-daemon
```

### 2. Verify ATR Changes in Production

| Check | Expected Behavior |
|-------|-------------------|
| 3-2 target calculation | `entry +/- (ATR * 1.5)` in logs |
| 3-2 trailing activation | Log shows "ATR Trailing stop ACTIVATED" at 0.75 ATR |
| Daily audit | Discord embed at 4:30 PM ET |

### 3. Dashboard Overhaul (Terminal A continuation)

**Goal:** Complete STRAT Pattern Analytics dashboard

**Reference:** `c:\Users\sheeh\Downloads\strat-analytics-dashboard (1).html`

**Remaining Work:**
- Fix pattern/TFC data population (signal lookup failing)
- Implement 6-tab dashboard structure
- Add TFC comparison tab
- Integrate Alpaca portfolio history API for equity curve

---

## Known Issues Still Open

| Issue | Root Cause | Status |
|-------|-----------|--------|
| TFC shows "-" on dashboard | Signal lookup by OSI symbol failing | Pending |
| TFC shows 0/4 on Discord | Different code path or not populated | Pending |
| Pattern column blank | Same root cause as TFC | Pending |

---

## Key Files (EQUITY-52-B Changes)

| File | Changes |
|------|---------|
| `strat/unified_pattern_detector.py` | ATR target calculator, 3-2 bypass for 1H override |
| `strat/signal_automation/position_monitor.py` | ATR trailing stop config, methods, initialization |
| `strat/signal_automation/alerters/discord_alerter.py` | `send_daily_audit()` method |
| `strat/signal_automation/daemon.py` | Daily audit generation and scheduling |

---

## Mandatory Workflow

### During Development
1. **CLAUDE.md Section 2:** Invoke `strat-methodology` skill for ANY STRAT-related work
2. **CLAUDE.md Section 3:** Run tests before claiming functionality works

### Pre-Commit Checklist
- [ ] Run `/code-review` on changed files
- [ ] If touching trade execution: Run `pr-review-toolkit:silent-failure-hunter`
- [ ] Tests pass locally

### Session End Protocol
- [ ] Update docs/HANDOFF.md
- [ ] Update .session_startup_prompt.md
- [ ] Store session facts in OpenMemory

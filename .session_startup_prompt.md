# Session Startup Prompt - EQUITY-57

**Previous Session:** EQUITY-56 (January 12, 2026)
**Current Branch:** `main`
**VPS Status:** EQUITY-56 pushed to origin, needs VPS deployment
**Plan Mode:** OFF (deployment and verification tasks)

---

## EQUITY-56 Status: COMPLETE

**Two bugs fixed:**

1. **Field Name Mismatch (Dashboard showed $0.00):**
   - Alpaca returns: `realized_pnl`, `buy_price`, `sell_price`
   - Panel expects: `pnl`, `entry_price`, `exit_price`
   - Fix: Added field normalization in `options_loader.py`

2. **TFC Calculation Bug (Trades showed 0/4):**
   - Historical data doesn't capture intrabar state at entry
   - Detection TF bar may show as Type 1 when it was 2U/2D at entry
   - Fix: Count detection TF as aligned BY DEFINITION at entry
   - Result: No more TFC 0 trades (minimum is 1/4)

**STRAT Methodology Clarification (from user):**
- Entry = break = bar became 2U/2D = detection TF aligned
- TFC score = count of aligned timeframes (1-4)
- A trade should never have TFC 0 because entry itself makes detection TF aligned

---

## Priority 1: Deploy EQUITY-56 to VPS

```bash
ssh atlas@178.156.223.251
cd /home/atlas/vectorbt-workspace
git pull
sudo systemctl restart atlas-daemon
uv run python scripts/backfill_trade_tfc.py --days 90
```

---

## Priority 2: Verify Dashboard Displays

After VPS deployment:
- Check Railway dashboard shows P&L values (not $0.00)
- Check TFC column shows 1-4 (not 0)
- Check pattern column shows pattern types (not "-")

---

## Remaining Dashboard Work

| Item | Status |
|------|--------|
| Field name normalization | DONE (EQUITY-56) |
| TFC calculation fix | DONE (EQUITY-56) |
| enriched_trades.json | DONE - 38 trades, TFC 1-3 |
| Add TFC column to open positions | Pending |
| Style refinements | Pending |

---

## Reference Documents

- HANDOFF: `docs/HANDOFF.md`
- CLAUDE.md: `docs/CLAUDE.md` (STRICT COMPLIANCE)
- Plan file: `C:\Users\sheeh\.claude\plans\lively-stargazing-sutherland.md`

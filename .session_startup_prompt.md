# Session Startup Prompt - EQUITY-52

**Previous Session:** EQUITY-51 (January 8-9, 2026)
**Current Branch:** `main`
**VPS Status:** Deployed with all EQUITY-47 through EQUITY-51 changes

---

## TWO PARALLEL WORKSTREAMS

This session may run in two parallel Claude terminals:

### Terminal A: Dashboard Overhaul

**Goal:** Implement STRAT Pattern Analytics dashboard

**Reference Design:** `c:\Users\sheeh\Downloads\strat-analytics-dashboard (1).html`

**Key Features to Implement:**
1. Overview tab with 4 metrics cards + 2 bar charts
2. Patterns tab with ranking table
3. TFC comparison tab (WITH vs WITHOUT)
4. Equity curve from Alpaca portfolio history
5. Fix pattern/TFC data population issues

**Start Command:** Enter Plan Mode to design implementation

### Terminal B: 3-2 ATR Targets + Trade Audit

**Goal 1:** ATR-based targets for 3-2 patterns
- Replace fixed 1.5% with ATR * 1.5
- Add trailing stop (activate at 0.75 ATR, trail by 1.0 ATR)

**Goal 2:** Automated Trade Audit
- Daily VPS script at 4:30 PM ET
- Discord `/audit` command
- Validate pattern match, entry accuracy, TFC

**Start Command:** Enter Plan Mode to design implementation

---

## Known Issues (Fix First)

| Issue | Root Cause |
|-------|-----------|
| TFC shows "-" on dashboard | Signal lookup failing |
| Pattern column blank | Same - signal store linkage |
| TFC shows 0/4 on Discord | Verify tfc_score population |

---

## Key Files by Workstream

### Dashboard (Terminal A)
- `dashboard/app.py` - Main layout and callbacks
- `dashboard/components/options_panel.py` - Options trading tab
- `dashboard/data_loaders/options_loader.py` - Data fetching
- `c:\Users\sheeh\Downloads\strat-analytics-dashboard (1).html` - Reference design

### 3-2 Targets (Terminal B)
- `strat/unified_pattern_detector.py` - Target calculation
- `strat/signal_automation/position_monitor.py` - Trailing stop logic
- `strat/signal_automation/daemon.py` - Trade execution

### Trade Audit (Terminal B)
- `scripts/trade_audit.py` - Existing audit script (enhance)
- `strat/signal_automation/alerters/discord_alerter.py` - Discord commands

---

## Pipeline Gap Analysis (From EQUITY-51)

**Equity fixes NOT in Crypto:**
- EQUITY-46: Stale setup validation
- EQUITY-48: Type 3 pattern invalidation
- EQUITY-49: TFC re-evaluation at entry
- EQUITY-51: Stale 1H position detection

**Future work:** Create shared execution validation module

---

## Account Note

User may reset SMALL paper trading account for fresh performance tracking.
After reset, update Railway credentials if needed.

---

## Mandatory Workflow

### During Development
1. **CLAUDE.md Section 2:** Invoke `strat-methodology` skill for ANY STRAT-related work
2. **CLAUDE.md Section 3:** Run tests before claiming functionality works

### Pre-Commit Checklist
- [ ] Run `/code-review` on changed files
- [ ] If touching trade execution: Run `pr-review-toolkit:silent-failure-hunter`
- [ ] Tests pass locally

### Session End Protocol
- [ ] Update docs/HANDOFF.md
- [ ] Update .session_startup_prompt.md
- [ ] Store session facts in OpenMemory

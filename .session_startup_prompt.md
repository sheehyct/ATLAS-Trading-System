# Session Startup Prompt - EQUITY-53

**Previous Session:** EQUITY-52-A (January 10, 2026)
**Current Branch:** `main`
**VPS Status:** Pending deployment of EQUITY-52-A and EQUITY-52-B changes

---

## EQUITY-52-A Completed Work (Terminal A - Dashboard)

Implemented unified STRAT Analytics dashboard:

1. **Signal Lookup Fix** - OSI symbol reverse index for O(1) lookup
2. **Pattern Overwrite Bug Fix** - Fallback only when signal store lookup fails
3. **Unified Panel** - 1005-line strat_analytics_panel.py with market toggle
4. **6-Tab Structure** - Overview, Patterns, TFC Comparison, Closed, Pending, Equity
5. **Portfolio History** - Alpaca API integration for equity curve

**Key User Decisions:**
- TFC threshold >= 4 for "WITH TFC"
- No emojis (CLAUDE.md compliance)
- Replace Options + Crypto tabs with single unified STRAT Analytics tab
- Market dropdown instead of separate tabs

**Tests:** 65 signal automation tests passed

---

## Next Session Priorities

### 1. Test Dashboard Locally

```bash
cd dashboard
uv run python app.py
# Open http://localhost:8050 -> STRAT Analytics tab
```

**Verify:**
- Market dropdown toggles between Equity Options and Crypto
- All 6 sub-tabs render correctly
- Pattern data shows (not "-") with OSI reverse index fix
- TFC comparison has data for trades with tfc_score

### 2. Deploy to VPS

Both EQUITY-52-A and EQUITY-52-B changes:
```bash
# On VPS
cd /path/to/vectorbt-workspace
git pull origin main
sudo systemctl restart atlas-signal-daemon
```

### 3. Remaining Dashboard Work

| Item | Status |
|------|--------|
| Add TFC column to open positions | Pending |
| Test with real closed trades data | Pending |
| Style refinements to match reference | Pending |
| Railway deployment testing | Pending |

---

## Key Files (EQUITY-52-A Changes)

| File | Changes |
|------|---------|
| `strat/signal_automation/signal_store.py` | OSI reverse index, O(1) lookup |
| `dashboard/data_loaders/options_loader.py` | Fix pattern overwrite bug |
| `dashboard/data_loaders/live_loader.py` | Portfolio history method |
| `dashboard/components/strat_analytics_panel.py` | NEW - Unified panel (1005 lines) |
| `dashboard/app.py` | Tab integration and callbacks |

---

## Mandatory Workflow

### During Development
1. **CLAUDE.md Section 2:** Invoke `strat-methodology` skill for ANY STRAT-related work
2. **CLAUDE.md Section 3:** Run tests before claiming functionality works

### Pre-Commit Checklist
- [ ] Run `/code-review` on changed files
- [ ] If touching trade execution: Run `pr-review-toolkit:silent-failure-hunter`
- [ ] Tests pass locally

### Session End Protocol
- [ ] Update docs/HANDOFF.md
- [ ] Update .session_startup_prompt.md
- [ ] Store session facts in OpenMemory

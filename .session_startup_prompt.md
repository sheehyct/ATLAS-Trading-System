# ATLAS Development - Session Startup

**Current Session:** EQUITY-19
**Last Session:** EQUITY-18 (December 18, 2025)
**Focus:** Enable 15m/30m scanning in production, monitor results

---

## Session EQUITY-18 Summary

### Changes Implemented

1. **Setup Validation** (ported from crypto scanner)
   - File: `strat/paper_signal_scanner.py` around line 1082
   - Validates X-1 patterns: bars must stay inside setup bar range
   - Validates X-2 patterns: entry level must not be already triggered

2. **15m/30m Data Fetching**
   - Added `'15m'` and `'30m'` support to `_fetch_data()` method
   - Uses Alpaca VBT `15Min` and `30Min` timeframes

3. **Config Updates**
   - Added `fifteen_min_cron` and `thirty_min_cron`
   - Added `scan_15m` and `scan_30m` enable flags

4. **Scheduler Updates**
   - Added `add_15m_job()` and `add_30m_job()` methods

5. **Daemon Updates**
   - Added 15m/30m scan job registration
   - Extended `_is_intraday_entry_allowed()` with time thresholds

### Commits
- `e631970` - feat(strat): add 15m/30m timeframe scanning support

### Tests
- 311 passed, 2 skipped

---

## Session EQUITY-19 Priority Tasks

| Priority | Task | Details |
|----------|------|---------|
| **HIGH** | Enable 15m/30m scanning | Set `enable_htf_resampling=False` to use new scan jobs |
| Monitor | Watch daemon logs | Look for 15m/30m scans during market hours |
| Low | Dashboard integration | Show 15m/30m signals on dashboard |

---

## How to Enable 15m/30m Scanning

The daemon currently uses `enable_htf_resampling=True` by default. This uses a single 15-min base scan that resamples to all higher timeframes.

To use the new dedicated 15m/30m scan jobs, set `enable_htf_resampling=False`:

**Option 1: Environment Variable**
```bash
# On VPS
export SIGNAL_ENABLE_HTF_RESAMPLING=false
```

**Option 2: Config File**
Edit `strat/signal_automation/config.py`:
```python
enable_htf_resampling: bool = False  # Changed from True
```

---

## Time Filtering ("Let the Market Breathe")

```
15m 2-bar: 9:45 AM    15m 3-bar: 10:00 AM
30m 2-bar: 10:00 AM   30m 3-bar: 10:30 AM
1H 2-bar:  10:30 AM   1H 3-bar:  11:30 AM
```

---

## Key Files Reference

| File | Purpose |
|------|---------|
| `strat/paper_signal_scanner.py` | Equities pattern detection (with setup validation) |
| `strat/signal_automation/daemon.py` | Signal daemon (with 15m/30m jobs) |
| `strat/signal_automation/config.py` | Schedule configuration |
| `strat/signal_automation/scheduler.py` | APScheduler job management |

---

## Session Numbering

- **EQUITY-XX** - Equities STRAT options work
- **CRYPTO-XX** - Crypto derivatives work

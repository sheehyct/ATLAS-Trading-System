# ATLAS Development - Session Startup

**Current Session:** CRYPTO-8
**Last Session:** CRYPTO-7 (December 15, 2025)
**Focus:** Debug daily alerts, live trading mode, position exit tracking

---

## Session CRYPTO-7 Accomplishments

### Discord Trade Alerts (COMPLETE)

Wired entry/exit alerts for actual trades (not pattern detection).

**Alert Types:**
| Type | Config Flag | Default | Status |
|------|-------------|---------|--------|
| Entry | `alert_on_trade_entry` | True | Enabled |
| Exit | `alert_on_trade_exit` | True | Enabled |
| Signal Detection | `alert_on_signal_detection` | False | Disabled |
| Trigger | `alert_on_trigger` | False | Disabled |

**Entry Alert Format:**
```
Entry: BTC-PERP-INTX 2D-1-2D 4h LONG
@ $97,500.00 | Qty: 0.0123 | Leverage: 10x
Target: $99,000.00 | Stop: $96,500.00
```

**Exit Alert Format:**
```
Exit [PROFIT]: BTC-PERP-INTX LONG
Target Hit | Entry: $97,500.00 -> Exit: $99,000.00
P/L: +$18.45 (+1.54%)
```

### VPS Deployment (COMPLETE)

- REST API running on port 8080
- Firewall opened
- Both daemons running (equities + crypto)

**Key Files:**
| File | Purpose |
|------|---------|
| `crypto/scanning/daemon.py` | Entry/exit alert wiring, config flags |

---

## Session CRYPTO-8 Priorities

### Priority 1: Debug Daily Alerts (HIGH)

Daily timeframe patterns not alerting (ETH 2D-1-2D Dec 12-14 missed).

**Tasks:**
- Add verbose logging for daily timeframe pattern detection
- Check if daily bars detected correctly during incomplete bar periods
- Verify `detected_time` handling for daily patterns

### Priority 2: Live Trading Mode (MEDIUM)

Enable execution in daemon (currently signals-only for safety).

**Tasks:**
- Test paper trading execution flow
- Verify position sizing with leverage
- Monitor exits via stop/target

### Priority 3: Position Exit Tracking (LOW)

Track stop/target hits in dashboard.

**Tasks:**
- Add exit history to closed trades
- Show exit reason (STOP/TARGET/MANUAL)
- Track time to exit

---

## Crypto Module Structure (v0.7.0)

```
crypto/
  __init__.py              # v0.7.0
  api/
    __init__.py            # Module init
    server.py              # Flask REST API (port 8080)
  config.py                # Leverage tiers, timeframes
  alerters/
    __init__.py
    discord_alerter.py     # Entry/exit trade alerts
  exchange/
    coinbase_client.py     # Coinbase API
  data/
    state.py               # CryptoSystemState
  scanning/
    models.py              # CryptoDetectedSignal
    signal_scanner.py      # CryptoSignalScanner
    entry_monitor.py       # CryptoEntryMonitor (on_poll)
    daemon.py              # CryptoSignalDaemon (Discord alerts wired)
  simulation/
    paper_trader.py        # PaperTrader
    position_monitor.py    # CryptoPositionMonitor
  trading/
    sizing.py              # Position sizing
    derivatives.py         # Funding, margin
```

---

## Plan Mode Recommendation

**PLAN MODE: OFF** - Debugging and operational work.

---

## Reference Documents

- HANDOFF: `docs/HANDOFF.md`
- Daemon: `crypto/scanning/daemon.py`
- CLI: `scripts/run_crypto_daemon.py`
- Discord Alerter: `crypto/alerters/discord_alerter.py`

---

## Session Numbering

- **83K-XX** - Equities STRAT options work
- **CRYPTO-XX** - Crypto derivatives work

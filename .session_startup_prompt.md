# Session 83K-26 Startup: Strike Range Optimization

**Date**: December 2025
**Previous Session**: 83K-25 (Days-to-Magnitude Analysis Complete)
**Status**: ITM DELTA TARGETING VALIDATED - Ready for range optimization
**Plan Mode**: OFF

---

## Session 83K-25 Summary

### Key Accomplishments

1. **BUG FIX: entry_date Not Stored**
   - Problem: Results DataFrame stored pattern date, not actual entry date
   - Location: `strat/options_module.py` lines 1182, 1484
   - Fix: Added `entry_date` field to results

2. **Days-to-Magnitude Analysis (45 trades, 4 symbols)**
   - 80% of trades resolve in 1 bar (very fast)
   - Mean: 1.36 bars, Median: 1 bar
   - Current DTE (14-45 days) may be overbuying time

3. **ITM vs OTM Strike Analysis (CRITICAL FINDING)**

   | Delta Bucket | Trades | Win Rate | P&L |
   |--------------|--------|----------|-----|
   | Deep OTM (0-0.35) | 3 | 0% | -$1,357 |
   | OTM (0.35-0.50) | 14 | 43% | -$1,668 |
   | ATM (0.50-0.65) | 21 | 71% | -$1,494 |
   | ITM (0.65-0.85) | 6 | **83%** | **+$2,881** |
   | Deep ITM (0.85-1.01) | 1 | 100% | +$434 |

   **Conclusion:** ITM strikes (0.65-0.85 delta) are most profitable.

### Key Insight

Small sample analysis can be misleading. SPY-only (7 trades) suggested OTM outperforms. Multi-symbol (45 trades) shows ITM clearly outperforms.

---

## Session 83K-26 Priorities

**PRIORITY 1:** Investigate negative overall P&L (-$1,205) despite positive ITM bucket
- 45 trades total, only 6 in ITM bucket
- Most trades in ATM/OTM buckets which are all negative
- May need to tighten delta range

**PRIORITY 2:** Consider tightening delta range to 0.65-0.80
- Current: 0.50-0.80 (includes unprofitable ATM range)
- Proposed: 0.65-0.80 (focuses on profitable ITM range)

**PRIORITY 3:** Evaluate shorter DTE range (7-21 days)
- 80% of trades resolve in 1 bar
- Current DTE 14-45 days pays unnecessary theta
- Shorter DTE = less premium = higher ROI potential

---

## RECURRING BUG - Greeks Endpoint (CRITICAL)

| Endpoint | Historical Data | Params |
|----------|----------------|--------|
| `/greeks/first_order` | **2020+ (FULL)** | date + interval |
| `/greeks/eod` | 2024+ only | start_date/end_date |

**ALWAYS USE `/greeks/first_order` FOR HISTORICAL GREEKS**

---

## Key Files

| File | Purpose |
|------|---------|
| `strat/options_module.py` | Options execution + strike selection |
| `scripts/verify_trade_details.py` | Trade verification |
| `docs/Claude Skills/strat-methodology/OPTIONS.md` | Strike methodology reference |

---

## Commands

```bash
# Run verification with ThetaData
uv run python scripts/verify_trade_details.py --verbose

# Run tests
uv run pytest tests/test_strat/ tests/test_validation/ -q

# Multi-symbol analysis (45 trades)
# See Session 83K-25 analysis code in HANDOFF.md
```

---

## Important Context

- ThetaData QUOTES work for all historical dates (2020+)
- ThetaData GREEKS first_order works for all dates (2020+)
- ThetaData GREEKS eod only works for 2024+ dates (DO NOT USE)
- Strike format is DOLLARS (380.0) not cents per OpenAPI spec
- 488 tests passing, 2 skipped

# ATLAS Development - Session Startup

**Current Session:** CRYPTO-6
**Last Session:** CRYPTO-5 (December 14, 2025)
**Focus:** Dashboard integration, live trading mode, performance tracking

---

## Session CRYPTO-5 Accomplishments

### VPS Deployment (COMPLETE)

Crypto daemon deployed and running 24/7 on VPS.

**Key Files:**
| File | Changes |
|------|---------|
| `deploy/atlas-crypto-daemon.service` | Fixed argument order, uv cache paths |
| `scripts/run_crypto_daemon.py` | Discord webhook env var support |

**VPS Commands:**
```bash
ssh atlas@178.156.223.251 "sudo systemctl status atlas-crypto-daemon"
ssh atlas@178.156.223.251 "sudo journalctl -u atlas-crypto-daemon -f"
```

### 60-Second Position Monitoring (COMPLETE)

Position checks moved from 5-minute health loop to entry monitor poll.

**Key Files:**
| File | Changes |
|------|---------|
| `crypto/scanning/entry_monitor.py` | Added `on_poll` callback |
| `crypto/scanning/daemon.py` | Wired `_on_poll` to check positions |

### Discord Alerts (COMPLETE)

Rich embeds with crypto-specific fields sent to Discord.

**Key Files:**
| File | Purpose |
|------|---------|
| `crypto/alerters/__init__.py` | Module init |
| `crypto/alerters/discord_alerter.py` | CryptoDiscordAlerter (~520 LOC) |

**Webhook:** Configured in VPS .env as `DISCORD_WEBHOOK_URL`

---

## Session CRYPTO-6 Priorities

### Priority 1: Dashboard Integration (HIGH)

Add crypto paper trading to existing Dash dashboard.

**Tasks:**
- Create `dashboard/data_loaders/crypto_loader.py`
- Add crypto panel component
- Show positions, P&L, signal history

### Priority 2: Live Trading Mode (MEDIUM)

Enable execution in daemon (currently signals-only mode).

**Tasks:**
- Test paper trading execution flow
- Verify position sizing with leverage
- Monitor exits via stop/target

### Priority 3: Performance Tracking (LOW)

Aggregate crypto P&L metrics.

**Tasks:**
- Calculate win rate, profit factor, expectancy
- Add metrics to dashboard
- Track by timeframe/pattern

---

## Crypto Module Structure (v0.5.0)

```
crypto/
  __init__.py              # v0.5.0
  config.py                # Leverage tiers, timeframes
  alerters/
    __init__.py            # NEW
    discord_alerter.py     # CryptoDiscordAlerter (NEW)
  exchange/
    coinbase_client.py     # Coinbase API
  data/
    state.py               # CryptoSystemState
  scanning/
    models.py              # CryptoDetectedSignal
    signal_scanner.py      # CryptoSignalScanner
    entry_monitor.py       # CryptoEntryMonitor (on_poll)
    daemon.py              # CryptoSignalDaemon (Discord)
  simulation/
    paper_trader.py        # PaperTrader
    position_monitor.py    # CryptoPositionMonitor
  trading/
    sizing.py              # Position sizing
    derivatives.py         # Funding, margin
```

---

## Plan Mode Recommendation

**PLAN MODE: ON** - Dashboard integration requires architectural planning.

---

## Reference Documents

- HANDOFF: `docs/HANDOFF.md`
- Daemon: `crypto/scanning/daemon.py`
- CLI: `scripts/run_crypto_daemon.py`
- Discord Alerter: `crypto/alerters/discord_alerter.py`

---

## Session Numbering

- **83K-XX** - Equities STRAT options work
- **CRYPTO-XX** - Crypto derivatives work

# Session Startup Prompt - EQUITY-108

**Previous Session:** EQUITY-107 (February 14, 2026)
**Current Branch:** `main`
**VPS Status:** DEPLOYED - $100K account, all bug fixes live
**Plan Mode:** OFF (priorities are testing and review)
**Note:** EQUITY-107 had TWO parallel terminals. Position sizing (capital_tracker) changes are UNCOMMITTED in working tree.

---

## EQUITY-107 Accomplishments

1. **Ticker Selection Pipeline Review** - Thoroughly reviewed Claude Desktop spec (1,276 lines, 11 sections). Identified 14 issues including broken MCP scanner dependency, pattern naming violations, missing TFC-pattern alignment. Wrote revised architecture plan grounded in actual codebase.
2. **5 Bug Fixes in Ticker Selection** - Fixed critical performance bottleneck (VIX caching + ThreadPoolExecutor parallel scanning, ~6x speedup), direction-aware proximity scoring, continuation pattern detection, Unicode/ASCII compliance, targeted regex.
3. **Code Simplification** - Consolidated VIX caching from 4 write sites to 1, extracted _extract_vix_close helper, moved scorer imports to module level.
4. **Position Sizing (Parallel Terminal)** - Capital tracker and executor changes in working tree (UNCOMMITTED). Review needed.

---

## EQUITY-108 Priorities

### Priority 1: Review Uncommitted EQUITY-107 Position Sizing Work
- `strat/signal_automation/capital_tracker.py` (NEW, uncommitted)
- `strat/signal_automation/executor.py` (modified, uncommitted)
- `strat/signal_automation/position_monitor.py` (modified, uncommitted)
- `strat/signal_automation/daemon.py` (modified, uncommitted)
- `strat/signal_automation/config.py` (modified, uncommitted)
- `tests/test_signal_automation/test_capital_tracker.py` (NEW, uncommitted)
- Review, test, and commit or iterate

### Priority 2: Test Ticker Selection on Live Market Data
- Run `python scripts/run_ticker_selection.py` during market hours
- Verify: universe > 3K, screened 300-500, non-zero patterns, valid candidates.json
- Test parallel scanning performance (target: < 5 min for 100 symbols)
- Deploy to VPS as 6 AM cron job

### Priority 3: Trade Prioritization Review
- Current prioritization not effective per user feedback
- Review TFC-based priority ranking, timeframe priority, signal scoring
- May need fundamental rethink of which trades get taken

### Priority 4: Railway Dashboard Reconnection
- Railway lost GitHub repo connection (accidental removal)
- Need to reconnect Railway to sheehyct/ATLAS-Trading-System repo

---

## Known Bugs (from EQUITY-105 Audit)

| Bug | Status | Description |
|-----|--------|-------------|
| 3-? Pattern Dedup | FIXED + DEPLOYED | Bidirectional patterns create duplicate trades |
| 1H EOD Exits | FIXED + DEPLOYED | PDT detection added, account reset to $100K eliminates PDT |
| Silent Exits | FIXED + DEPLOYED | sync_positions now fires exit callback, stale exits allowed pre-market |
| Dashboard Patterns | DEFERRED | Closed trades show "Unclassified" pattern |
| TFC Not Reaching Dashboard | DEFERRED | 0/75 trades show TFC>=4 |
| Dashboard Minor Issues | DEFERRED | Various smaller display/data issues |

---

## Reference Documents

- HANDOFF: `docs/HANDOFF.md`
- CLAUDE.md: `docs/CLAUDE.md` (STRICT COMPLIANCE)
- Ticker Selection Plan: `C:\Users\Chris\.claude\plans\curious-beaming-dawn.md`
- Problems Audit Plan: `C:\Users\Chris\.claude\plans\snoopy-moseying-crystal.md`

# ATLAS Development - Session Startup

**Current Session:** CRYPTO-3
**Last Session:** CRYPTO-2 (December 13, 2025)
**Focus:** Crypto automation stack - entry monitor and daemon

---

## Session CRYPTO-2 Accomplishments

### Crypto STRAT Signal Scanner (COMPLETE)

Connected crypto module to Atlas STRAT engine for pattern detection on BTC/ETH perpetual futures.

**Files Created:**
| File | Purpose |
|------|---------|
| `crypto/scanning/__init__.py` | Module initialization |
| `crypto/scanning/models.py` | CryptoDetectedSignal, CryptoSignalContext |
| `crypto/scanning/signal_scanner.py` | CryptoSignalScanner class (650 lines) |

**Files Modified:**
| File | Changes |
|------|---------|
| `crypto/config.py` | Added MAINTENANCE_WINDOW config, signal filters |
| `crypto/data/state.py` | Added signal tracking methods |
| `crypto/__init__.py` | Export scanning module, v0.2.0 |

**Verified Working:**
```python
from crypto.scanning import CryptoSignalScanner

scanner = CryptoSignalScanner()
signals = scanner.scan_all_timeframes('BTC-PERP-INTX')
# Found 13 signals across 1w, 1d, 4h, 1h, 15m timeframes
```

**Key Features:**
- 24/7 operation (no market hours filter)
- Friday 5-6 PM ET maintenance window handling
- Multi-timeframe scanning (1w -> 1d -> 4h -> 1h -> 15m)
- SETUP pattern detection (X-1 waiting for break)
- TFC (Timeframe Continuity) score calculation

---

## Session CRYPTO-3 Priorities

### Priority 1: Entry Monitor (HIGH)

Create `crypto/scanning/entry_monitor.py` for 24/7 trigger polling.

**Tasks:**
- Poll current prices every 60 seconds
- Check SETUP signals for trigger breaches
- Handle Friday maintenance window pause
- Similar to `strat/signal_automation/entry_monitor.py`

### Priority 2: Daemon Orchestrator (HIGH)

Create `crypto/scanning/daemon.py` to orchestrate full automation.

**Tasks:**
- 15-minute scan interval for pattern detection
- Entry monitor for live triggers
- Integration with PaperTrader for execution
- Graceful shutdown handling

### Priority 3: Paper Trading Integration (MEDIUM)

Wire triggered signals to PaperTrader execution.

**Tasks:**
- Position sizing via `crypto/trading/sizing.py`
- Trade execution via `crypto/simulation/paper_trader.py`
- P&L tracking

---

## Crypto Module Structure

```
crypto/
  __init__.py              # v0.2.0, exports CryptoSignalScanner
  config.py                # Symbols, maintenance window, signal filters
  exchange/
    coinbase_client.py     # Coinbase API (data + orders)
  data/
    state.py               # CryptoSystemState with signal tracking
  scanning/                # NEW IN CRYPTO-2
    __init__.py
    models.py              # CryptoDetectedSignal, CryptoSignalContext
    signal_scanner.py      # CryptoSignalScanner
    entry_monitor.py       # TODO: CRYPTO-3
    daemon.py              # TODO: CRYPTO-3
  simulation/
    paper_trader.py        # Paper trading simulation
  trading/
    sizing.py              # Position sizing
    derivatives.py         # Funding, margin calculations
```

---

## Key Differences from Equities

| Aspect | Equities | Crypto |
|--------|----------|--------|
| Market Hours | 9:30-16:00 ET | 24/7 (1h Friday maint) |
| Timeframes | 1M, 1W, 1D, 1H | 1w, 1d, 4h, 1h, 15m |
| Data Source | Alpaca via VBT Pro | Coinbase API |
| Leverage | N/A (options) | 4x-10x |
| Direction | CALL/PUT | LONG/SHORT |

---

## Plan Mode Recommendation

**PLAN MODE: OFF** - Architecture established in CRYPTO-2, CRYPTO-3 is implementation.

---

## Reference Documents

- HANDOFF: `docs/HANDOFF.md`
- Crypto Config: `crypto/config.py`
- Signal Scanner: `crypto/scanning/signal_scanner.py`
- Equities Entry Monitor: `strat/signal_automation/entry_monitor.py` (reference)

---

## Session Numbering

- **83K-XX** - Equities STRAT options work
- **CRYPTO-XX** - Crypto derivatives work

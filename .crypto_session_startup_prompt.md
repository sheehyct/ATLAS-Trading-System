# ATLAS Crypto Monitoring - Session Startup

**Current Session:** CRYPTO-MONITOR-2
**Last Session:** CRYPTO-MONITOR-1 (December 21, 2025)
**Focus:** Monitor fixed crypto daemon for signal persistence and triggers

---

## Session Objective

Monitor the crypto daemon in real-time to:
1. Validate pattern classifications against actual bar data
2. Verify entry correctness when trades trigger
3. Flag missed opportunities (pattern â†’ no trade)
4. Check for equity bugs in crypto code

---

## Quick Start Commands

```bash
# Check daemon is running
ssh atlas@178.156.223.251 "sudo systemctl status atlas-crypto-daemon --no-pager | head -15"

# Start monitoring logs
ssh atlas@178.156.223.251 "sudo journalctl -u atlas-crypto-daemon -f --no-pager"

# Get recent signals
ssh atlas@178.156.223.251 "sudo journalctl -u atlas-crypto-daemon --since '10 minutes ago' --no-pager | grep 'NEW SIGNAL'"
```

---

## Critical: Invoke strat-methodology Skill

**MANDATORY** for any STRAT pattern analysis. The skill has been updated with:
- Three Universal Truths
- Intrabar Classification rules
- "Let the Market Breathe" timing (not applicable to 24/7 crypto, but reference for methodology)

---

## Known Issues to Monitor

### 1. Signal Expiration Bug - FIXED (CRYPTO-MONITOR-1)

**Status:** RESOLVED

The signal expiration bug was fixed in commit ad62441:
- Root cause: `detected_time` used bar timestamp instead of scan time
- Fix: Changed to `datetime.now(timezone.utc)`
- Signals now persist for the configured 24 hours

### 2. Trigger vs Execution Gap - MONITOR

64 triggers but only 6 executions before fix. With signals now persisting:
- Expect more triggers to fire
- Watch for actual trade executions

### 3. Multiple 3-? Setups per Timeframe

Not a bug - scanner detects all outside bars in lookback window.
Consider limiting to most recent outside bar in future enhancement.

### 4. Pattern Accuracy

Verify COMPLETED patterns match actual bar sequence.

---

## Event Response Protocol

### When NEW SIGNAL [COMPLETED] appears:

1. Note: symbol, timeframe, pattern, direction
2. Fetch price data (if needed for verification)
3. Check: Does pattern match actual bar types?
4. Log finding in CRYPTO_HANDOFF.md

### When TRIGGER FIRED appears:

1. Note: trigger price vs current price
2. Check: Is entry direction correct per STRAT?
3. Log in CRYPTO_HANDOFF.md

### When TARGET/STOP HIT appears:

1. Log the trade result
2. Calculate if R:R was correct
3. Note any discrepancies

### When signals expire without trigger:

1. Flag as potential missed opportunity
2. Check if price broke trigger level after expiration
3. Document in CRYPTO_HANDOFF.md

---

## Reference Documents

| Document | Purpose |
|----------|---------|
| `docs/CRYPTO_HANDOFF.md` | Session handoff for crypto monitoring |
| `docs/CRYPTO_DAEMON_ANALYSIS.md` | Full analysis with trade data |
| `docs/HANDOFF.md` | Equity work (separate stream) |
| `~/.claude/skills/strat-methodology/` | STRAT rules reference |

---

## Symbols Being Monitored

| Symbol | Description |
|--------|-------------|
| BIP-20DEC30-CDE | Bitcoin derivative (Dec 30 expiry) |
| ETP-20DEC30-CDE | Ethereum derivative (Dec 30 expiry) |

---

## Session End Protocol

1. Update `docs/CRYPTO_HANDOFF.md` with findings
2. Update this file for next session
3. Store summary in OpenMemory (tag: CRYPTO-MONITOR)
4. Provide chat summary

---

## Session Numbering

- **CRYPTO-MONITOR-X** - Crypto daemon monitoring sessions
- **EQUITY-XX** - Equity STRAT options work (separate stream)
- **CRYPTO-XX** - Crypto development work (separate from monitoring)

---

## Session History

### CRYPTO-MONITOR-1 (Dec 21, 2025) - COMPLETE
- Fixed signal expiration bug (detected_time used bar timestamp)
- Fixed signal deduplication (signal_id used detected_time)
- Deployed to VPS, signals now persist
- Commit: ad62441
